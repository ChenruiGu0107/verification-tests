---
:global_options:
  # these are options as seen by `oc options`
  :api_version: --api-version=<value>
  :ca: --certificate-authority=<value>
  :cluster: --cluster=<value>
  :config: --config=<value>
  :context: --context=<value>
  :h: -h
  :help: --help
  :user: --user=<value>
  :insecure: --insecure-skip-tls-verify=<value>
  :namespace: --namespace=<value>
  :n: -n <value>
  :loglevel: --loglevel=<value>
  :log_dir: --log_dir=<value>
  :log_flush_frequency: --log_flush_frequency=<value>
  :logtostderr: --logtostderr=<value>
  :server: --server=<value>
  :stderrthreshold: --stderrthreshold=<value>
  :token: --token=<value>
  :v: --v=<value>
:add_role_to_user:
  :cmd: oc policy add-role-to-user <role> <user_name>
:add_role_to_group:
  :cmd: oc policy add-role-to-group <role> <group_name>
:add_secret:
  :cmd: oc secrets add serviceaccount/<sa_name> secrets/<secret_name>
  :options:
    :for: --for=<value>
:annotate:
  :cmd: oc annotate
  :options:
    :resource: <value>
    :resourcename: <value>
    :keyval: <value>
    :all: --all=<value>
    :noheadersfalse: --no-headers=<value>
    :o: -o <value>
    :output: --output=<value>
    :outputversion: --output-version=<value>
    :overwrite: --overwrite=<value>
    :resourceversion: --resource-version=<value>
    :t: -t <value>
    :template: --template=<value>
:attach:
  :cmd: oc attach
  :options:
    :pod: <value>
    :c: -c <value>
    :i: -i
    :t: -t
    :container: --container=<value>
    :stdin: --stdin=<value>
    :tty: --tty=<value>
:build_logs:
  :cmd: oc build-logs <build_name>
  :options:
    :follow: --follow=<value>
    :nowait: --nowait=<value>
:cancel_build:
  :cmd: oc cancel-build <build_name>
  :options:
    :dump_logs: --dump-logs=<value>
    :restart: --restart=<value>
:config:
  :cmd: oc config
  :options:
    :subcommand: <value>
:config_set:
  :cmd: oc config set <prop_name> <prop_value>
:config_set_cluster:
  :cmd: oc config set-cluster <name>
  :options:
    :api_version: --api-version=<value>
    :cert: --certificate-authority=<value>
    :embed: --embed-certs=<value>
    :insecure: --insecure-skip-tls-verify=<value>
    :server: --server=<value>
:config_set_context:
  :cmd: oc config set-context <name>
  :options:
    :cluster: --cluster=<value>
    :namespace: --namespace=<value>
    :user: --user=<value>
:config_set_creds:
  :cmd: oc config set-credentials <name>
  :options:
    :cert:  --client-certificate=<value>
    :key:  --client-key=<value>
    :embed:  --embed-certs=<value>
    :password:  --password=<value>
    :token: --token=<value>
    :user:  --username=<value>
:config_use_context:
  :cmd: oc config use-context <name>
:config_unset:
  :cmd: oc config unset <prop_name>
:config_view:
  :cmd: oc config view
  :options:
    :output: --output=<value>
    :flatten: --flatten
    :minify: --minify
  :expected:
    - "apiVersion: v"
    - "kind: Config"
  :optional_properties:
    :current_context: !ruby/regexp '/^current-context: (.+)/'
:create:
  :cmd: oc create
  :options:
    :f: -f <value>
    :filename: --filename=<value>
:delete:
  :cmd: oc delete
  :options:
    :cascade: --cascade=<value>
    :f: -f <value>
    :l: -l <value>
    :all: --all
    #The following 'all' can be used with selectors, like the -l flag.
    :all_no_dash: all
    :object_name_or_id: <value>
    :object_type: <value>
:deploy:
  :cmd: oc deploy <deployment_config>
  :options:
    :cancel: --cancel
    :enable_triggers: --enable-triggers
    :latest: --latest
    :retry: --retry
:describe:
  :cmd: oc describe <resource>
  :options:
    :name: <value>
    :l: -l <value>
    :f: -f <value>
    :selector: --selector=<value>
:edit:
  :cmd: oc edit
  :options:
    :filename: --filename=<value>
    :output: --output=<value>
:env:
  :cmd: oc env
  :options:
    :env_name: <value> 
    :all: --all=<value>
    :list: --list=<value>
    :resource: <value>
    :keyval: <value>
    :e: -e <value>
:exec:
  # reorder global_options and options to allow specifying exec command
  :cmd: oc exec <pod> <global_options> <options>
  :options:
    :c: -c <value>
    :container: --container=<value>
    :stdin: --stdin=<value>
    :tty: --tty=<value>
    :t: -t
    :i: -i
    :oc_opts_end: --
    :exec_command: <value>
    :exec_command_arg: <value>
:exec_raw_oc_cmd_for_neg_tests:   # used for negative testing in which we want to deviate from yaml
  :cmd: oc
  :options:
    :arg: <value>
    :test_do_not_use: <value>
:cucushift_test_do_not_use:
  :cmd: <command>
  :options:
    :opt: <value>
:explain:
  :cmd: oc explain
  :options:
    :resource: <value>
:export:
  :cmd: oc export
  :options:
    :resource: <value>
    :name: <value>
    :filename: --filename=<value>
    :output_format: --output=<value>
    :all: --all=<value>
    :f: -f <value>
    :o: -o <value>
    :l: -l <value>
    :t: -t <value>
    :as_template: --as-template=<value>
    :exact: --exact=<value>
    :output_version: --output-version=<value>
:expose:
  :cmd: oc expose <resource> <resource_name>
  :options:
    :generator: --generator=<value>
    :route_port: --port=<value>
    :route_protocol: --protocol=<value>
    :target_port: --target-port=<value>
    :route_name: --name=<value>
    :route_type: --type=<value>
    :name: --name=<value>
    :selector: --selector=<value>
    :output: --output=<value>
    :o: -o <value>
:get:
  :cmd: oc get <resource>
  :options:
    :resource_name: <value>
    :output: --output=<value>
    :no_headers: --no-headers=<value>
    :o: -o <value>
    :l: -l <value>
    :w: --watch=<value>
    :template: --template=<value>
    :all_namespace: --all-namespaces=<value>
:help:
  :cmd: oc help
  :options:
    # use global `h` and `help` options if needed
:import_image:
  :cmd: oc import-image
  :options:
    :image_name: <value>
:login:
  :cmd: oc login
  :options:
    :u: -u <value>
    :p: -p <value>
    :username: --username=<value>
    :password: --password=<value>
    :token: --token=<value>
  :optional_properties:
    :username: !ruby/regexp '/ogged into ".+?" as "(.+?)"/'
  :expected:
    # strange, sometimes "Already logged into..." is printed to console, and
    #   sometimes when run multiple times - not (oc v3.0.0.0)
    #   e.g. run multiple times `oc login --username=joe`
    - !ruby/regexp '/Login successful.|ogged into|sing project|new project/'
:logout:
  :cmd: oc logout
  :expected:
    - !ruby/regexp '/Logged ".+" out on/'
:logs:
  :cmd: oc logs <resource_name>
  :options:
    :c: -c <value>
    :f: -f
    :p: -p
:new_app:
  :cmd: oc new-app
  :options:
    :app_repo: <value>
    :labels: --labels=<value>
    :l: -l <value>
    :name: --name=<value>
    :strategy: --strategy=<value>
    :template: --template=<value>
    :output: --output=<value>
    :param: --param=<value>
    :insecure_registry: --insecure-registry=<value>
    :image_stream: --image-stream=<value>
    :image: --image=<value>
    :group: --group=<value>
    :file: --file=<value>
    :env: --env=<value>
    :docker_image: --docker-image=<value>
    :context_dir: --context-dir=<value>
    :code: --code=<value>
    :search: --search=<value>
:new_build:
  :cmd: oc new-build
  :options:
    :app_repo: <value>
    :code: --code=<value>
    :docker_image: --docker-image=<value>
    :e: -e <value>
    :image: --image=<value>
    :l: -l <value>
    :name: --name=<value>
    :output: --output=<value>
    :strategy: --strategy=<value>
    :template: --template=<value>
    :to_docker: --to-docker=<value>
:new_dockercfg:
  :cmd: oc secrets new-dockercfg <secret_name>
  :options:
    :docker_email: --docker-email=<value>
    :docker_password: --docker-password=<value>
    :docker_server: --docker-server=<value>
    :docker_username: --docker-username=<value>
    :no_headers: --no-headers=<value>
    :output: --output=<value>  # One of: json|yaml|template|templatefile|wide
    :output_version: --output-version=<value>
    :template: --template=<value>
:new_project:
  :cmd: oc new-project <project_name>
  #:expected:
  #  - Created project <project_name>
  :options:
    :display_name: --display-name=<value>
    :description: --description=<value>
    :admin: --admin=<value>
:new_secret:
  :cmd: oc secrets new <secret_name> <credential_file>
  :options:
    :no_headers: --no-headers=<value>
    :output: --output=<value>  # One of: json|yaml|template|templatefile|wide
    :output_version: --output-version=<value>
    :template: --template=<value>
    :type: --type=<value>
    :quiet: --quiet=<value>

:patch:
  :cmd: oc patch <resource>
  :options:
    :resource_name: <value>
    :p: -p <value>
:port_forward:
  :cmd: oc port-forward
  :options:
    :pod: <value>
    :port_spec: <value>
:process:
  :cmd: oc process
  :options:
    :f: -f <value>
    :template: <value>
    :v: --value=<value>
    :l: -l <value>
:project:
  :cmd: oc project
  :options:
    :project_name: <value>
:remove_role_from_user:
  :cmd: oc policy remove-role-from-user <role> <user_name>
:remove_role_from_group:
  :cmd: oc policy remove-role-from-group <role> <group_name>
:replace:
  :cmd: oc replace
  :options:
    :f: -f <value>
    :force: --force
    :output: --output=<value>
    :cascade: --cascade
    :grace-period: --grace-period=<value>
:rollback:
  :cmd: oc rollback <deployment_name>
  :options:
    :change_scaling_settings: --change-scaling-settings
    :change_strategy: --change-strategy
    :change_triggers: --change-triggers
    :dry_run: --dry-run
    :output: --output=<value>
    :template: --template=<value>
    :to_version: --to-version=<value>
:rsh:
  :cmd: oc rsh <global_options> <options>
  :options:
    :app_name: <value>
    :pod: <value>
:run:
  :cmd: oc run <name>
  :options:
    :image: --image <value>
    :port: --port <value>
    :replicas: --replicas <value>
    :generator: --generator=<value>
    :limits: --limits=<value>
    :requests: --requests=<value>
    :dry_run: --dry-run
    :-l: --labels=<value>
    :-t: --template=<value>
    :-o: --output=<value>

:scale:
  :cmd: oc scale <resource> <name>
  :options:
    :current_replicas: --current-replicas=<value>
    :replicas:  --replicas=<value>
    :resource_ver: --resource-version=<value>
:secrets:
  :cmd: oc secrets <action>
  :options:
    :name: <value>
    :source: <value>
    :serviceaccount: <value>
    :secrets_name: <value>
    :for: --for=<value>
    :username: --username=<value>
    :password: --password=<value>
:start_build:
  :cmd: oc start-build
  :options:
    :buildconfig: <value>
    :follow: --follow=<value>
    :from_build: --from-build=<value>
    :from_webhook: --from-webhook=<value>
    :git_post: --git-post-receive=<value>
    :git_repository: --git-repository=<value>
    :list_webhooks: --list-webhooks=<value>
:status:
  :cmd: oc status
  :options:
    :v: -v
:tag:
  :cmd: oc tag
:types:
  :cmd: oc types
:version:
  :cmd: oc version
  :expected:
    - oc v
    - kubernetes v
  :properties:
    :oc_version: !ruby/regexp '/^oc v(.+)$/'
    :kubernetes_version: !ruby/regexp '/kubernetes v(.+)$/'
:volume:
  :cmd: oc volume <resource>
  :options:
    :resource_name: <value>
    :action: <value>
    :name: --name=<value>
    :type: --type=<value>
    :secret-name: --secret-name=<value>
    :source: --source=<value>
    :mount-path: --mount-path=<value>
    :all: --all=<value>
    :selector: --selector='<value>'
:whoami:
  :cmd: oc whoami
  :options:
    :invalid_option:  -b   # for negative testing
:who_can:
  :cmd: oc policy who-can <verb> <resource>

#################### admin commands section

:oadm_add_cluster_role_to_user:
  :cmd: oadm policy add-cluster-role-to-user <role_name> <user_name>
:oadm_add_cluster_role_to_group:
  :cmd: oadm policy add-cluster-role-to-group <role_name> <group_name>
:oadm_add_role_to_user:
  :cmd: oadm policy add-role-to-user <role_name> <user_name>
  :options:
    :role_namespace: --role-namespace=<value>
:oadm_add_role_to_group:
  :cmd: oadm policy add-role-to-group <role_name> <group_name>
:oadm_new_project:
  :cmd: oadm new-project <project_name>
  :expected:
    - Created project <project_name>
  :options:
    :display_name: --display-name=<value>
    :description: --description=<value>
    :admin: --admin=<value>
    :node_selector: --node-selector=<value>
:oadm_prune_builds:
  :cmd: oadm prune builds
:oadm_prune_deployments:
  :cmd: oadm prune deployments
  :options:
    :confirm: --confirm=<value>
    :keep_complete: --keep-complete=<value>
    :keep_failed: --keep-failed=<value>
    :keep_younger_than: --keep-younger-than=<value>
    :orphans: --orphans=<value>
    :orphans_noopt: --orphans
:oadm_remove_cluster_role_from_user:
  :cmd: oadm policy remove-cluster-role-from-user <role_name> <user_name>
:oadm_remove_cluster_role_from_group:
  :cmd: oadm policy remove-cluster-role-from-group <role_name> <group_name>
:oadm_remove_role_from_user:
  :cmd: oadm policy remove-role-from-user <role_name> <user_name>
:oadm_remove_role_from_group:
  :cmd: oadm policy remove-role-from-group <role_name> <group_name>
:oadm_version:
  :cmd: oadm version
  :expected:
    - oadm v
    - kubernetes v
  :properties:
    :oadm_version: !ruby/regexp '/^oadm v(.+)$/'
    :kubernetes_version: !ruby/regexp '/kubernetes v(.+)$/'
