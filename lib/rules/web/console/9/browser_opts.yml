---
:scroll_strategy: 1
:hooks:
  :click: |-
    # this will execute in the Web4Cucumber instance context
    proc { |block|
      begin
        block.call
      rescue Selenium::WebDriver::Error::UnknownError => e
        if e.message.include? "Other element would receive the click:"
          logger.warn e.inspect

          case e.message
          when /nav-pf-secondary-nav/
            # see https://bugzilla.redhat.com/show_bug.cgi?id=1512539
            run_action(:close_second_level_navigation)
          when /navbar-pf-vertical/, /project-bar/, /form-group/
            scroll_by = browser.element(css: ".navbar.navbar-pf-vertical").height
            scroll_by += browser.element(css: ".project-bar").height
            browser.execute_script("window.scrollBy(0,#{scroll_by})")
          end

          block.call
        else
          logger.debug "unhandled UnknownError"
          raise
        end
      end
    }
:size: [1280,1024]
